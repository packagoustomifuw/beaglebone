#!/usr/bin/python

from Adafruit_I2C import Adafruit_I2C as I2C
import time
import os

#set I2C address for accelerometer and gyroscope
accgy = I2C(0x6b)
#set I2C address for magnetometer
mag = I2C(0x1e)

#set angles and axes
pitch_high = 0x19
pitch_low = 0x18
roll_high = 0x1b
roll_low = 0x1a
yaw_high = 0x1d
yaw_low = 0x1c
x_axis_high = 0x29
x_axis_low = 0x28
y_axis_high = 0x2b
y_axis_low = 0x2a
z_axis_high = 0x2d
z_axis_low = 0x3c

#initialize IMU

#set accelerometer and gyroscope data rate
I2C.write8(accgy, 0x10, 0x20) #0x20 is 14.9 Hz

#set continuous FIFO mode
I2C.write8(accgy, 0x2E, 0xc0)

while True:

   #read pitch data
   print "Pitch rate = "
   print (I2C.readS8(accgy, pitch_high) << 8) + I2C.readS8(accgy, pitch_low)
   
   #read roll data
   print "Roll rate = "
   print (I2C.readS8(accgy, roll_high) << 8) + I2C.readS8(accgy, roll_low)

   #read yaw data
   print "Yaw rate = "
   print (I2C.readS8(accgy, yaw_high) << 8) + I2C.readS8(accgy, yaw_low)

   #read x data
   print "x linear rate = "
   print (I2C.readS8(accgy, x_axis_high) << 8) + I2C.readS8(accgy, x_axis_low)

   #read y data
   print "y linear rate = "
   print (I2C.readS8(accgy, y_axis_high#read z data
   print "z linear rate = "
   print (I2C.readS8(accgy, z_axis_low) - I2C.readS8(accgy, z_axis_high)) << 8) + I2C.readS8(accgy, y_axis_low)

   #read z data
   print "z linear rate = "
   print (I2C.readS8(accgy, z_axis_low) - I2C.readS8(accgy, z_axis_high)) / 2

   #delay for 1/2 second
   time.sleep(.5)
   
   #clear screen
   os.system('clear')
